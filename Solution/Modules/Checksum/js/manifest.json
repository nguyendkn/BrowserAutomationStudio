{
    "actions": [
		{
            "code": [
                {
                    "file": "Checksum_String_code.js",
                    "name": "Checksum_String_code"
                }
            ],
            "description": {
                "en": "String checksum",
                "ru": "Контрольная сумма строки"
            },
            "interface": "Checksum_String_interface.js",
            "is_element": false,
            "name": "Checksum_String",
            "select": "Checksum_String_select.js",
            "template": "{{input}} -> {{Save}}"
        },
        {
            "code": [
                {
                    "file": "Checksum_File_code.js",
                    "name": "Checksum_File_code"
                }
            ],
            "description": {
                "en": "File checksum",
                "ru": "Контрольная сумма файла"
            },
            "interface": "Checksum_File_interface.js",
            "is_element": false,
            "name": "Checksum_File",
            "select": "Checksum_File_select.js",
            "template": "{{filePath}} -> {{Save}}"
        }
    ],
    "api_version": 1,
    "autogenerated_functions": [
        "Checksum_String",
        "Checksum_File"
    ],
    "browser": [
    ],
    "depends": [
    ],
    "description": "Checksum calculation",
    "description_small": {
        "en": "Checksum",
        "ru": "Контрольная сумма"
    },
    "developer_email": "sasha9817@mail.ru",
    "developer_name": "GhostZ",
    "developer_site": "https://t.me/GhostZed",
    "embeddeddata": [
        {
            "Data": "this.error = function(err, lang){\n    throw (lang==\"ru\" ? 'Не удалось рассчитать контрольную сумму' : 'Failed to calculate checksum') + ', ' + (err.message || err);\n};",
            "DataName": "UtilChecksum",
            "DataType": 1,
            "LanguageName": "Node",
            "LanguageVersion": "12.18.3"
        },
        {
            "Data": "const crypto = require('crypto');\r\nconst util = require(\"../UtilChecksum\");\r\nlet {input, algorithm, base64, encoding, outputFormat, lang} = [[CHECKSUM_NODE_PARAMETERS]];\r\n\r\ntry{\r\n    let hash = crypto.createHash(algorithm);\r\n    hash.update(input, base64 ? 'base64' : encoding);\r\n    [[CHECKSUM_NODE_PARAMETERS]] = hash.digest(outputFormat);\r\n}catch(err){\r\n    util.error(err, lang);\r\n};",
            "DataName": "Checksum_String",
            "DataType": 0,
            "LanguageName": "Node",
            "LanguageVersion": "12.18.3"
        },
        {
            "Data": "const crypto = require('crypto');\r\nconst fs = require('fs');\r\nconst util = require(\"../UtilChecksum\");\r\nlet {filePath, algorithm, outputFormat, lang} = [[CHECKSUM_NODE_PARAMETERS]];\r\n\r\ntry{\r\n    [[CHECKSUM_NODE_PARAMETERS]] = await (new Promise((resolve, reject) => {\r\n        let hash = crypto.createHash(algorithm);\r\n        let stream = fs.createReadStream(filePath);\r\n        stream.on('error', function(err){\r\n            if(err.message.includes(\"no such file or directory\")){\r\n                reject(lang==\"ru\" ? (`файл \"${filePath}\" не существует`) : (`file \"${filePath}\" does not exist`));\r\n            }else{\r\n                reject(err);\r\n            };\r\n        });\r\n        stream.on('data', function(data){\r\n            hash.update(data);\r\n        });\r\n        stream.on('end', function(){\r\n            resolve(hash.digest(outputFormat));\r\n        });\r\n    }));\r\n}catch(err){\r\n     util.error(err, lang);\r\n};",
            "DataName": "Checksum_File",
            "DataType": 0,
            "LanguageName": "Node",
            "LanguageVersion": "12.18.3"
        }
    ],
    "engine": [
        "engine.js"
    ],
    "icon": "Checksum.png",
    "info": {
        "en": "Module for calculating the checksum of a string or file",
        "ru": "Модуль для расчета контрольной суммы строки или файла"
    },
    "is_autogenerated": true,
    "languages": [
        {
            "Name": "Node",
            "Version": "12.18.3"
        }
    ],
    "localize": {
		"String": {"ru":"Строка"},
		"Algorithm": {"ru":"Алгоритм"},
		"Output format": {"ru":"Формат вывода"},
		"Is base64 encoded": {"ru":"Закодирована в base64"},
		"Calculate the checksum of the specified string.": {"ru":"Рассчитать контрольную сумму указанной строки."},
		
		"File path": {"ru":"Путь к файлу"},
		"Calculate the checksum of the specified file.": {"ru":"Рассчитать контрольную сумму указанного файла."}
    },
    "major_version": 1,
    "minor_version": 0,
    "modules": [
    ],
    "name": "Checksum"
}
