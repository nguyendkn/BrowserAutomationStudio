!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).microdiff=t()}(this,function(){"use strict";const e={Date:!0,RegExp:!0,String:!0,Number:!0};return function t(o,n,i={cyclesFix:!1},c=[]){let s=[];const f=Array.isArray(o);for(const p in o){const u=o[p],r=f?+p:p;if(!(p in n)){s.push({type:"REMOVE",path:[r],oldValue:o[p]});continue}const a=n[p],l="object"==typeof u&&"object"==typeof a;if(!(u&&a&&l)||e[Object.getPrototypeOf(u).constructor.name]||i.cyclesFix&&c.includes(u))u===a||l&&(isNaN(u)?u+""==a+"":+u==+a)||s.push({path:[r],type:"CHANGE",value:a,oldValue:u});else{const e=t(u,a,i,i.cyclesFix?c.concat([u]):[]);s.push.apply(s,e.map(e=>(e.path.unshift(r),e)))}}const p=Array.isArray(n);for(const e in n)e in o||s.push({type:"CREATE",path:[p?+e:e],value:n[e]});return s}});